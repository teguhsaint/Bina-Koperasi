<!-- atribut name di form dan id jangan diganti  -->
<form action="" id="form-anggota">
  <div class="mb-3">
    <label class="form-label">Pilih AO</label>

    <select class="form-control" name="ao_kode">
      <option value="AO001">Alice Johnson</option>
      <option value="AO002">Bob Anderson</option>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">Kode Anggota Baru</label>
    <input type="text" name="agt_kode" placeholder="Kode Anggota" class="form-control" required />
  </div>
  <div class="mb-3">
    <label class="form-label">Nama Lengkap</label>
    <input type="text" name="agt_nama" placeholder="" class="form-control" required />
  </div>

  <div class="mb-3">
    <label class="form-label">NIK</label>
    <input type="number" name="agt_nik" placeholder="Nomor Induk Kependudukan (16 digit)" class="form-control" required />
  </div>

  <div class="mb-3">
    <label class="form-label">Alamat</label>
    <input type="text" name="agt_alamat" placeholder="" class="form-control" required />
  </div>

  <div class="mb-3">
    <label class="form-label">No Hp</label>
    <input type="number" name="agt_nohp" placeholder="hp" class="form-control" required />
  </div>
  <div class="mb-3">
    <input type="file" class="form-control" id="fileInput" name="agt_ktp" />
  </div>
  <!-- <button id="uploadButton" type="button">Unggah</button> -->
  <div id="status"></div>
  <div class="mb-3">
    <button class="btn btn-primary" type="submit">Submit</button>
  </div>
</form>
<script>
  $("#form-anggota").submit(function (e) {
    e.preventDefault();

    var data = new FormData(this);
    var fileInput = $("#fileInput").get(0);
    var file = fileInput.files[0];
    console.log(file);
    data.append("file", file);

    $.ajax({
      url: url_folder_api + "conf/upload.php",
      type: "POST",
      data: data,
      contentType: false,
      processData: false,
      dataType: "JSON",
      success: function (response) {
        console.log(response);
      },
      error: function (jqXHR, textStatus, errorMessage) {
        console.log("Gagal: " + errorMessage);
      },
    });
  });
</script>
