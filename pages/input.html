<!-- atribut name di form dan id jangan diganti  -->
<form id="form-anggota">
  <div class="mb-3">
    <label class="control-label">Pilih AO</label>

    <select class="form-control" name="agt_kode">
      <option value="AO001">Alice Johnson</option>
      <option value="AO002">Bob Anderson</option>
    </select>
  </div>

  <div class="mb-3">
    <label class="form-label">nama</label>
    <input type="text" name="agt_nama" placeholder="" class="form-control" required />
  </div>

  <div class="mb-3">
    <label class="control-label">NIk</label>
    <input type="number" name="agt_nik" placeholder="nik" class="form-control" required />
  </div>

  <div class="mb-3">
    <label class="form-label">alamat</label>
    <input type="text" name="agt_alamat" placeholder="" class="form-control" required />
  </div>

  <div class="mb-3">
    <label class="control-label">no hp</label>
    <input type="number" name="agt_nohp" placeholder="hp" class="form-control" required />
  </div>

  <input type="file" id="fileInput" name="agt_ktp" />
  <button id="uploadButton">Unggah</button>
  <div id="status"></div>
  <button type="submit">Submit</button>
</form>
<script>
  $("#form-anggota").submit(function (e) {
    e.preventDefault();

    var data = new FormData(this);
    var fileInput = $("#fileInput").get(0);
    var file = fileInput.files[0];
    console.log(file);
    data.append("file", file);
    // console.log(data);
    $.ajax({
      url: url_folder_api + "conf/upload.php",
      type: "POST",
      data: data,
      contentType: false,
      processData: false,
      dataType: "JSON",
      success: function (response) {
        console.log(response);
      },
      error: function (jqXHR, textStatus, errorMessage) {
        console.log("Gagal: " + errorMessage);
      },
    });
  });
</script>
